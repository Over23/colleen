<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta charset="utf-8"/> <title>Colleen</title> <meta name="viewport" content="width=device-width"/> <meta name="description" content="IRC bot with a modular framework."/> <meta name="author" content="Nicolas Hafner &lt;shinmera@tymoon.eu&gt;"/> <style type="text/css"> body{
          max-width: 1024px;
          margin: 0 auto 0 auto;
          font-family: sans-serif;
          color: #333333;
          font-size: 14pt;
          padding: 5px;
      }

      body>header{
          display:flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
          max-width: 100%;
      }

      img{
          max-width: 100%;
          max-height: 100%;
      }

      code{
          font-family: Consolas, Inconsolata, monospace;
      }

      a{
          text-decoration: none;
          color: #0055AA;
      }

      #documentation{
          text-align: justify;
      }

      #documentation pre{
          margin-left: 20px;
      }

      #symbol-index>ul{
          list-style: none;
          padding: 0;
      }
      #symbol-index .package>ul{
          list-style: none;
          padding: 0 0 0 10px;
      }
      #symbol-index .package .nicknames{
          font-weight: normal;
      }
      #symbol-index .package h4{
          display: inline-block;
          margin: 0;
      }
      #symbol-index .package article{
          margin: 0 0 15px 0;
      }
      #symbol-index .package article header{
          font-size: 1.2em;
          font-weight: normal;
      }
      #symbol-index .package .name{
          margin-right: 5px;
      }
      #symbol-index .package .docstring{
          margin: 0 0 0 15px;
          white-space: pre-wrap;
          font-size: 12pt;
      }

      @media (max-width: 800px){
          body{font-size: 12pt;}
      } </style> </head> <body> <header> <h1><img alt="colleen" src="colleen-logo.png"/></h1> <span class="version">2.2.0</span> <p class="description">IRC bot with a modular framework.</p> </header> <main> <article id="documentation">  <div><h2>About Colleen</h2> <p>Colleen is a relatively large IRC bot framework with support for event handling, encapsulation through modules, command parsing, threading and more. However, it is also usable as a direct IRC bot straight away thanks to a plethora of modules that are included by default and should provide most of the functionality you might want out of a bot.</p> <h2>How to Use Colleen as a Bot</h2> <p>Load Colleen through Quicklisp or ASDF:</p> <pre><code>(ql:quickload :colleen)
(<a href="http://l1sp.org/cl/in-package">in-package</a> :colleen)</code></pre> <p>And start it up!</p> <pre><code>(<a href="#COLLEEN:STARTUP">startup</a>)</code></pre> <p>Colleen is managed through a bunch of configuration files. By default it has servers configured for TymoonNET and Freenode. First though, let's change the default nick to something that is less likely to be taken already. With that done we'll save our configuration to a file.</p> <pre><code>(<a href="http://l1sp.org/cl/setf">setf</a> (<a href="#COLLEEN:BOT-CONFIG">bot-config</a> :servers :default :nick) &quot;Colleek&quot;)
(<a href="#COLLEEN:SAVE-CONFIG">save-config</a>)</code></pre> <p>This should save a file called <code>colleen.uc.lisp</code> to a <code>config</code> folder underneath the Colleen root folder. When you open the file you'll see it is organised using a lisp-like syntax, with extension for hash-tables. Another thing you'll notice is that all strings are preceded with a <code>-</code>. This is a necessary evil in order to serialise certain data types to string and be able to serialise them back. For more information on how the configuration storage works, see <a href="http://shinmera.github.io/Universal-Config/">Universal-Config</a>. Using the configuration file you can set the servers to connect to by default, which channels to join and so on. For now we'll do it manually with some code.</p> <pre><code>(<a href="#COLLEEN:CONNECT">connect</a> :freenode)</code></pre> <p>If all works nicely, you'll see some log messages informing you of the connection. You should now be able to fire up an IRC client to Freenode and start conversing with your bot. Since the <code>essentials</code> module is loaded by default, you can try commands like <code>!time</code>, or <code>!echo hi</code>. If you want to see what's going on behind the scene, you can change the logging level from <code>:info</code> to <code>:trace</code>:</p> <pre><code>(<a href="http://l1sp.org/cl/setf">setf</a> (v:repl-level) :trace)</code></pre> <p>This'll show you quite a bit of output, including pings and all forms of event handling. It'll likely be much too noisy, but it can be very useful for debugging purposes.</p> <p>Since Colleen is not just a bot, but also a framework, we can use its functions to communicate ourselves.</p> <pre><code>(irc:privmsg &quot;this-is-my-nick-here&quot; &quot;Hello REPL!&quot; :server (<a href="#COLLEEN:SERVER">server</a> :freenode))</code></pre> <p>Obviously change the nick to your own first.</p> <p>Colleen's functionality is managed through modules. By default the <code>auth</code> and <code>essentials</code> modules are loaded. You can load up more modules by putting them into the <code>:MODULES</code> list in the configuration, using the <code>!module load</code> command or directly using <code><a href="#COLLEEN:LOAD-MODULE">load-module</a></code>.</p> <pre><code>(<a href="#COLLEEN:LOAD-MODULE">load-module</a> :silly)</code></pre> <p>Loading a module won't make it active yet though. For that you need to <code><a href="#COLLEEN:START">start</a></code> it first. You can use either the command <code>!module start</code> or the <code><a href="#COLLEEN:START-MODULE">start-module</a></code> function. If you put it into the configuration instead, it'll also automatically start it for you when you <code><a href="#COLLEEN:STARTUP">startup</a></code> Colleen.</p> <pre><code>(<a href="#COLLEEN:START-MODULE">start-module</a> :silly)</code></pre> <p>Some modules like <code>silly</code> perform actions not on commands, but when certain things are said. In order to avoid causing unnecessary noise, you need to activate for a specific channel. You can usually do that with an <code>activate</code> sub command. In this case it would be <code>!silly activate</code>. When you try that now you will most likely be denied access. Colleen includes a simple permissions restriction in order to separate &quot;dangerous administrative commands&quot; from publicly available ones. The <code>auth</code> module that is present by default will authenticate users by either a simple password or through NickServ. First you need to put your nick on the list of recognised names though. The <code>auth</code> module has its separate configuration file that currently does not exist yet. Before setting that up, we'll simply bypass it by smuggling our nick directly onto the authenticated list:</p> <pre><code>(<a href="http://l1sp.org/cl/push">push</a> &quot;this-is-my-nick-here&quot; (<a href="#COLLEEN:AUTH-USERS">auth-users</a> (<a href="#COLLEEN:GET-SERVER">get-server</a> :freenode)))</code></pre> <p>You should now be able to invoke <code>!silly activate</code> and try it with saying something like <code>how the hell</code>. You can stop it any time by invoking <code>!silly deactivate</code> or stopping the module entirely <code>!module stop silly</code>.</p> <p>Now in order to get the authentication set up properly, we first need the configuration file to appear. In order to manage configuration files for modules you can use <code>!module storage save auth</code> or <code><a href="#COLLEEN:SAVE-STORAGE">save-storage</a></code>.</p> <pre><code>(<a href="#COLLEEN:SAVE-STORAGE">save-storage</a> (<a href="#COLLEEN:MODULE">module</a> :auth))</code></pre> <p>The file will most likely just contain a table stub. Change it to something like this to make yourself authenticate-able:</p> <pre><code>{EQL
:LOGINS {EQL
         :this-is-my-nick-here &quot;-myPasswordGOESheeere!&quot;}}</code></pre> <p>Don't forget the necessary &quot;-&quot; before your password. Next you can load the configuration back in using <code>!module storage load auth</code> or <code><a href="#COLLEEN:LOAD-STORAGE">load-storage</a></code>.</p> <pre><code>(<a href="#COLLEEN:LOAD-STORAGE">load-storage</a> (<a href="#COLLEEN:MODULE">module</a> :auth))</code></pre> <p>Using <code>!logout</code> you can remove yourself from the authenticated list. If your nick is registered with NickServ you should now be able to use just <code>!login</code> to log back in, or alternatively pass your password along.</p> <p>Since everything is managed through configuration files you can create a running standalone bot by simply starting your lisp implementation with a file containing something akin to the following in it</p> <pre><code>(ql:quickload :colleen)
(<a href="http://l1sp.org/cl/funcall">funcall</a> (<a href="http://l1sp.org/cl/find-symbol">find-symbol</a> &quot;STARTUP&quot; &quot;COLLEEN&quot;))</code></pre> <p>Colleen has a lot more to offer of course, but I think this should suffice as a setup guide. For all the different modules, have a look at the <code>modules/</code> directory in Colleen's root. The commands each of them offer should be clear enough in the source, but if you prefer a more straight forward explanation of all the public functionality, there is a guide <a href="http://plaster.tymoon.eu/view/5A">here</a>. You can of course also experiment with the functionality without setting up your own and just using the live instance as mentioned in the guide.</p> <p>To shut Colleen down again nicely, simply invoke <code><a href="#COLLEEN:SHUTDOWN">shutdown</a></code>.</p> <h2>Using Colleen as a Framework</h2> <p>Functions are encapsulated in modules. A module requires a package and a <code><a href="#COLLEEN:DEFINE-MODULE">define-module</a></code> form within that package. A simple module stub would look something like this:</p> <pre><code>(<a href="http://l1sp.org/cl/in-package">in-package</a> #:colleen)
(<a href="http://l1sp.org/cl/defpackage">defpackage</a> #:my-module
  (:use #:cl #:colleen #:events))
(<a href="http://l1sp.org/cl/in-package">in-package</a> #:my-module)

(<a href="#COLLEEN:DEFINE-MODULE">define-module</a> my-module () ())</code></pre> <p>The <code><a href="#COLLEEN:DEFINE-MODULE">define-module</a></code> form is the same as <code><a href="http://l1sp.org/cl/defclass">defclass</a></code>, with some additional side effects to register it with the system. The extra package is necessary in order to provide an implicit environment to carry the current module and make commands like <code><a href="#COLLEEN:DEFINE-COMMAND">define-command</a></code> and <code><a href="#COLLEEN:DEFINE-HANDLER">define-handler</a></code> shorter. It is not strictly necessary to use a separate package per module, but it certainly is a good idea.</p> <p>Generally you'll want to use <code><a href="#COLLEEN:DEFINE-COMMAND">define-command</a></code>, <code><a href="#COLLEEN:DEFINE-GROUP">define-group</a></code> and <code><a href="#COLLEEN:DEFINE-HANDLER">define-handler</a></code>, although there exist more low-level constructs that allow you to do the same with more control over the output.</p> <pre><code>(<a href="#COLLEEN:DEFINE-GROUP">define-group</a> my-commands :documentation &quot;A collection of commands for my test module!&quot;)

(<a href="#COLLEEN:DEFINE-COMMAND">define-command</a> (my-commands test) () (:documentation &quot;Simply performs a test.&quot;)
  (<a href="#COLLEEN:RESPOND">respond</a> event &quot;Testing, testing, 1, 2, 3.&quot;)

(<a href="#COLLEEN:DEFINE-HANDLER">define-handler</a> (privmsg-event event) ()
  (v:info :my-module &quot;Got a privmsg by ~a: ~a&quot; (<a href="#COLLEEN:NICK">nick</a> event) (<a href="#COLLEEN:MESSAGE">message</a> event)))</code></pre> <p>By default within a <code><a href="#COLLEEN:DEFINE-COMMAND">define-command</a></code> or <code><a href="#COLLEEN:DEFINE-HANDLER">define-handler</a></code> body, the symbols <code><a href="#COLLEEN:EVENT">event</a></code> and <code><a href="#COLLEEN:MODULE">module</a></code> are bound to the current event instance and the current module instance. Furthermore, the module's storage is bound to <code><a href="#COLLEEN:*CONFIG*">uc:*config*</a></code>. Especially the configuration is useful, as you don't need to handle that manually yourself. Colleen automatically provides storage for you and will save and load it accordingly when your module is loaded or started. Accessing the configuration happens through Universal-Config's <code>config-tree</code>, which is <code><a href="http://l1sp.org/cl/setf">setf</a></code>-able. For more information on how serialising and accessing and all that works, see the <a href="http://shinmera.github.io/Universal-Config/">Universal-Config documentation</a>. For now we'll use this to implement a simple <code>last-message</code> function:</p> <pre><code>(<a href="#COLLEEN:DEFINE-HANDLER">define-handler</a> (privmsg-event event) ()
  (<a href="http://l1sp.org/cl/unless">unless</a> (<a href="#COLLEEN:COMMAND-P">command-p</a> (<a href="#COLLEEN:MESSAGE">message</a> event))
    (<a href="http://l1sp.org/cl/setf">setf</a> (uc:config-tree :last-message) (<a href="#COLLEEN:MESSAGE">message</a> event))))

(<a href="#COLLEEN:DEFINE-COMMAND">define-command</a> last-message () ()
  (<a href="#COLLEEN:RESPOND">respond</a> event (uc:config-tree :last-message)))</code></pre> <p>Aside from commands and handlers, Colleen also includes a timer functionality in order to schedule tasks. See <code><a href="#COLLEEN:DEFINE-TIMER">define-timer</a></code> and <code><a href="#COLLEEN:SCHEDULE-TIMER">schedule-timer</a></code>. Generally having a look at all the already existing modules should give a good idea on how to make your own, they usually aren't big and shouldn't be hard to understand in what they do.</p> </div>  </article> <article id="copyright">  <h2>Copyright</h2> <span>colleen</span> is licensed under the <span><a href="https://tldrlegal.com/search?q=Artistic">Artistic</a></span> license.  © <span>Nicolas Hafner &lt;shinmera@tymoon.eu&gt;</span> .  This library can be obtained on <a href="http://github.com/Shinmera/colleen">http://github.com/Shinmera/colleen</a>.  </article>  <article id="symbol-index"> <h2>Package Index</h2> <ul><li class="package"> <h3> <a name="COLLEEN" href="#COLLEEN">COLLEEN</a> <span class="nicknames">(ORG.SHIRAKUMO.COLLEEN)</span> </h3> <ul><li> <a name="COLLEEN:*BOT-MODULES*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*BOT-MODULES*">*BOT-MODULES*</a></code></h4>  </header> <pre class="docstring">Global module table consisting of name-&gt;instance pairs.</pre> </article> </li><li> <a name="COLLEEN:*CMD-MAP*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*CMD-MAP*">*CMD-MAP*</a></code></h4>  </header> <pre class="docstring">Hash table mapping command identifiers to command-handler instances.</pre> </article> </li><li> <a name="COLLEEN:*CMD-PRIORITY-ARRAY*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*CMD-PRIORITY-ARRAY*">*CMD-PRIORITY-ARRAY*</a></code></h4>  </header> <pre class="docstring">Priority sorted array for the command dispatching.

You should not modify this unless you know what you're doing as this
array is overwritten completely whenever GENERATE-COMMAND-PRIORITY-CACHE is invoked.</pre> </article> </li><li> <a name="COLLEEN:*CONFIG*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*CONFIG*">*CONFIG*</a></code></h4>  </header> <pre class="docstring">Bot core config.</pre> </article> </li><li> <a name="COLLEEN:*CONFIG-DIRECTORY*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*CONFIG-DIRECTORY*">*CONFIG-DIRECTORY*</a></code></h4>  </header> <pre class="docstring">The directory pathname where configuration files are stored.</pre> </article> </li><li> <a name="COLLEEN:*CONFIG-FILE*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*CONFIG-FILE*">*CONFIG-FILE*</a></code></h4>  </header> <pre class="docstring">Pathname pointing to the config file being used.</pre> </article> </li><li> <a name="COLLEEN:*CURRENT-MODULE*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*CURRENT-MODULE*">*CURRENT-MODULE*</a></code></h4>  </header> <pre class="docstring">Special variable containing the module in the current module context.</pre> </article> </li><li> <a name="COLLEEN:*CURRENT-SERVER*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*CURRENT-SERVER*">*CURRENT-SERVER*</a></code></h4>  </header> <pre class="docstring">Special variable containing the server in the current thread context.</pre> </article> </li><li> <a name="COLLEEN:*DEBUGGER*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*DEBUGGER*">*DEBUGGER*</a></code></h4>  </header> <pre class="docstring">Boolean indicating whether to invoke the debugger on an unhandled condition.</pre> </article> </li><li> <a name="COLLEEN:*DEFAULT-CONFIG-FILE*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*DEFAULT-CONFIG-FILE*">*DEFAULT-CONFIG-FILE*</a></code></h4>  </header> <pre class="docstring">Pathname pointing to the default colleen central configuration file.</pre> </article> </li><li> <a name="COLLEEN:*EVENT-MAP*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*EVENT-MAP*">*EVENT-MAP*</a></code></h4>  </header> <pre class="docstring">Global event map for event codes to event classes.</pre> </article> </li><li> <a name="COLLEEN:*EVT-MAP*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*EVT-MAP*">*EVT-MAP*</a></code></h4>  </header> <pre class="docstring">Hash table mapping event identifiers to EVENT-HANDLER instances.</pre> </article> </li><li> <a name="COLLEEN:*EVT-PRIORITY-MAP*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*EVT-PRIORITY-MAP*">*EVT-PRIORITY-MAP*</a></code></h4>  </header> <pre class="docstring">Hash table mapping event classes to a list of event handlers ordered by their priorities. 

You should not modify this yourself unless you know what you're doing as this
map is overwritten completely whenever GENERATE-HANDLER-PRIORITY-CACHE is invoked.</pre> </article> </li><li> <a name="COLLEEN:*IRC-MESSAGE-LIMIT*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*IRC-MESSAGE-LIMIT*">*IRC-MESSAGE-LIMIT*</a></code></h4>  </header> <pre class="docstring">Defines the maximum amount of characters in a IRC:PRIVMSG. This influences how long the messages can be before a warning is emitted and the message is possibly split into multiple parts.</pre> </article> </li><li> <a name="COLLEEN:*PRIORITY-NAMES*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*PRIORITY-NAMES*">*PRIORITY-NAMES*</a></code></h4>  </header> <pre class="docstring">Hash table mapping arbitrary names to event priorities.
Defined by default are :FIRST :PREPROCESS :BEFORE :MAIN :STANDARD
:DEFAULT :AFTER :POSTPROCESS :LAST.</pre> </article> </li><li> <a name="COLLEEN:*PRIORITY-NUMS*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*PRIORITY-NUMS*">*PRIORITY-NUMS*</a></code></h4>  </header> <pre class="docstring">Reverse mapping table for event priorities to names.
See *PRIORITY-NAMES*.</pre> </article> </li><li> <a name="COLLEEN:*PRIVMSG-LINE-LIMIT*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*PRIVMSG-LINE-LIMIT*">*PRIVMSG-LINE-LIMIT*</a></code></h4>  </header> <pre class="docstring">Defines the maximum amount of lines to send per IRC:PRIVMSG command.</pre> </article> </li><li> <a name="COLLEEN:*REPLY-CODE-MAP*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*REPLY-CODE-MAP*">*REPLY-CODE-MAP*</a></code></h4>  </header> <pre class="docstring">Map containing all known IRC codes, mapping them to specific keywords.</pre> </article> </li><li> <a name="COLLEEN:*SERVER-ENCODING*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*SERVER-ENCODING*">*SERVER-ENCODING*</a></code></h4>  </header> <pre class="docstring">Sets the encoding to use with server connections.</pre> </article> </li><li> <a name="COLLEEN:*SERVERS*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*SERVERS*">*SERVERS*</a></code></h4>  </header> <pre class="docstring">Table containing the IRC server instances.</pre> </article> </li><li> <a name="COLLEEN:*TIMER-MAP*"> </a> <article> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#COLLEEN:*TIMER-MAP*">*TIMER-MAP*</a></code></h4>  </header> <pre class="docstring">Hash table mapping timer names to time-handler instances.</pre> </article> </li><li> <a name="COLLEEN:CHANNEL-EVENT"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:CHANNEL-EVENT">CHANNEL-EVENT</a></code></h4>  </header> <pre class="docstring">Events for channel commands.</pre> </article> </li><li> <a name="COLLEEN:COMMAND-EVENT"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:COMMAND-EVENT">COMMAND-EVENT</a></code></h4>  </header> <pre class="docstring">Event for commands.</pre> </article> </li><li> <a name="COLLEEN:COMMAND-HANDLER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:COMMAND-HANDLER">COMMAND-HANDLER</a></code></h4>  </header> <pre class="docstring">Container class representing a command handler.</pre> </article> </li><li> <a name="COLLEEN:EVENT"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:EVENT">EVENT</a></code></h4>  </header> <pre class="docstring">Base event class.</pre> </article> </li><li> <a name="COLLEEN:EVENT-HANDLER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:EVENT-HANDLER">EVENT-HANDLER</a></code></h4>  </header> <pre class="docstring">Container class representing an event handler.</pre> </article> </li><li> <a name="COLLEEN:GENERATED-COMMAND-EVENT"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:GENERATED-COMMAND-EVENT">GENERATED-COMMAND-EVENT</a></code></h4>  </header> <pre class="docstring">Event for commands generated and handled outside of IRC streams (f.e. REPL).</pre> </article> </li><li> <a name="COLLEEN:GROUP-HANDLER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:GROUP-HANDLER">GROUP-HANDLER</a></code></h4>  </header> <pre class="docstring">Special command handler class for command groups.</pre> </article> </li><li> <a name="COLLEEN:MODULE"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:MODULE">MODULE</a></code></h4>  </header> <pre class="docstring">Base module class.</pre> </article> </li><li> <a name="COLLEEN:MODULE-SYSTEM"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:MODULE-SYSTEM">MODULE-SYSTEM</a></code></h4>  </header> <pre class="docstring">ASDF system subclass for Colleen modules.</pre> </article> </li><li> <a name="COLLEEN:SEND-EVENT"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:SEND-EVENT">SEND-EVENT</a></code></h4>  </header> <pre class="docstring">Event for when the bot sends a message.</pre> </article> </li><li> <a name="COLLEEN:SERVER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:SERVER">SERVER</a></code></h4>  </header> <pre class="docstring">Class to represent server connections.</pre> </article> </li><li> <a name="COLLEEN:TIME-HANDLER"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:TIME-HANDLER">TIME-HANDLER</a></code></h4>  </header> <pre class="docstring">Container class representing a time handler.</pre> </article> </li><li> <a name="COLLEEN:USER-EVENT"> </a> <article> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#COLLEEN:USER-EVENT">USER-EVENT</a></code></h4>  </header> <pre class="docstring">Events related to users.</pre> </article> </li><li> <a name="COLLEEN:CONNECTION-FAILED"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:CONNECTION-FAILED">CONNECTION-FAILED</a></code></h4>  </header> <pre class="docstring">Condition when the connection attempt failed for some reason. The original error is included.</pre> </article> </li><li> <a name="COLLEEN:DISCONNECT"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:DISCONNECT">DISCONNECT</a></code></h4>  </header> <pre class="docstring">Condition to disconnect and leave the handler loops.</pre> </article> </li><li> <a name="COLLEEN:IMPLICIT-GROUP-DEFINITION"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:IMPLICIT-GROUP-DEFINITION">IMPLICIT-GROUP-DEFINITION</a></code></h4>  </header> <pre class="docstring">Condition signalled when a group is implicitly defined for a grouped command.</pre> </article> </li><li> <a name="COLLEEN:INVALID-ARGUMENTS"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:INVALID-ARGUMENTS">INVALID-ARGUMENTS</a></code></h4>  </header> <pre class="docstring">Condition raised when a command is called with an invalid arguments structure.</pre> </article> </li><li> <a name="COLLEEN:MESSAGE-TOO-LONG"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:MESSAGE-TOO-LONG">MESSAGE-TOO-LONG</a></code></h4>  </header> <pre class="docstring">Condition signalled when an IRC message exceeds the byte limit set by *IRC-MESSAGE-LIMIT*</pre> </article> </li><li> <a name="COLLEEN:MODULE-ERROR"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:MODULE-ERROR">MODULE-ERROR</a></code></h4>  </header> <pre class="docstring">Condition superclass for module related errors.</pre> </article> </li><li> <a name="COLLEEN:MODULE-STOP"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:MODULE-STOP">MODULE-STOP</a></code></h4>  </header> <pre class="docstring">Condition signalled when a thread is interrupted due to a module-stop.</pre> </article> </li><li> <a name="COLLEEN:MODULE-SYSTEM-NOT-FOUND"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:MODULE-SYSTEM-NOT-FOUND">MODULE-SYSTEM-NOT-FOUND</a></code></h4>  </header> <pre class="docstring">Condition signalled when LOAD-MODULE is called on an unknown module system.</pre> </article> </li><li> <a name="COLLEEN:NETWORK-ERROR"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:NETWORK-ERROR">NETWORK-ERROR</a></code></h4>  </header> <pre class="docstring">Condition superclass for network releated errors.</pre> </article> </li><li> <a name="COLLEEN:NOT-AUTHORIZED"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:NOT-AUTHORIZED">NOT-AUTHORIZED</a></code></h4>  </header> <pre class="docstring">Condition raised when a user tried to execute a command he isn't authorized for.</pre> </article> </li><li> <a name="COLLEEN:PING-TIMEOUT"> </a> <article> <header class="condition"> <span class="type">condition</span>  <h4 class="name"><code><a href="#COLLEEN:PING-TIMEOUT">PING-TIMEOUT</a></code></h4>  </header> <pre class="docstring">Condition signalled when a ping-timeout is noticed.</pre> </article> </li><li> <a name="COLLEEN:ACTIVE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:ACTIVE">ACTIVE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:ARGUMENTS"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:ARGUMENTS">ARGUMENTS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:AUTH-USERS"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:AUTH-USERS">AUTH-USERS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:BOT-CONFIG"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:BOT-CONFIG">BOT-CONFIG</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ACCESSORS</code><code>)</code>  </header> <pre class="docstring">Wrapper around UC:CONFIG-TREE that always uses the colleen central config.</pre> </article> </li><li> <a name="COLLEEN:CANCELLED"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:CANCELLED">CANCELLED</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:CHANNEL"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:CHANNEL">CHANNEL</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:CHANNELS"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:CHANNELS">CHANNELS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:COMMAND-HANDLER"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:COMMAND-HANDLER">COMMAND-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER</code><code>)</code>  </header> <pre class="docstring">Returns the COMMAND-HANDLER instance associated with the given IDENTIFIER.</pre> </article> </li><li> <a name="COLLEEN:DISPATCHED"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DISPATCHED">DISPATCHED</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:DOCSTRING"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DOCSTRING">DOCSTRING</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:EVENT-HANDLER"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:EVENT-HANDLER">EVENT-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER</code><code>)</code>  </header> <pre class="docstring">Returns the EVENT-HANDLER instance associated with the given IDENTIFIER.</pre> </article> </li><li> <a name="COLLEEN:EVENT-TYPE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:EVENT-TYPE">EVENT-TYPE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:HANDLER-FUNCTION"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:HANDLER-FUNCTION">HANDLER-FUNCTION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:HANDLER-LOCK"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:HANDLER-LOCK">HANDLER-LOCK</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:HOST"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:HOST">HOST</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:IDENTIFIER"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:IDENTIFIER">IDENTIFIER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:LAUNCHER-FUNCTION"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:LAUNCHER-FUNCTION">LAUNCHER-FUNCTION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:LOCK"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:LOCK">LOCK</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:MESSAGE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:MESSAGE">MESSAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:MODULE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:MODULE">MODULE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">DESIGNATOR</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:MODULE-THREAD"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:MODULE-THREAD">MODULE-THREAD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE UUID</code><code>)</code>  </header> <pre class="docstring">Returns the thread identified by UUID on MODULE or NIL if none is found.</pre> </article> </li><li> <a name="COLLEEN:NAME"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:NAME">NAME</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:NICK"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:NICK">NICK</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:OUTPUT-STREAM"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:OUTPUT-STREAM">OUTPUT-STREAM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:PASSWORD"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PASSWORD">PASSWORD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:PATTERN"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PATTERN">PATTERN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:PORT"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PORT">PORT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:PRIORITY"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PRIORITY">PRIORITY</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:PRIORITY-NAME"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PRIORITY-NAME">PRIORITY-NAME</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NUM</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:PRIORITY-NUM"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PRIORITY-NUM">PRIORITY-NUM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NAME</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:REALNAME"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:REALNAME">REALNAME</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:SCANNER"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SCANNER">SCANNER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:SCHEDULINGS"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SCHEDULINGS">SCHEDULINGS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:STORAGE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:STORAGE">STORAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:SUBCOMMANDS"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SUBCOMMANDS">SUBCOMMANDS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:THREADS"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:THREADS">THREADS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:TIME-HANDLER"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:TIME-HANDLER">TIME-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER</code><code>)</code>  </header> <pre class="docstring">Returns the TIME-HANDLER instance associated with the given IDENTIFIER.</pre> </article> </li><li> <a name="COLLEEN:TIMER-TYPE"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:TIMER-TYPE">TIMER-TYPE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:USERNAME"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:USERNAME">USERNAME</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:USERS"> </a> <article> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:USERS">USERS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CHANNEL &amp;OPTIONAL (SERVER *CURRENT-SERVER*)</code><code>)</code>  </header> <pre class="docstring">Retrieve a list of currently active users in CHANNEL.

Returns two values: The list of nicks and whether the channel
is even on record or not.</pre> </article> </li><li> <a name="COLLEEN:ADD-TO-AUTH"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:ADD-TO-AUTH">ADD-TO-AUTH</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NICK &amp;OPTIONAL REASON</code><code>)</code>  </header> <pre class="docstring">Add the user to the authenticated list. The optional reason string is only for logging.</pre> </article> </li><li> <a name="COLLEEN:AUTH-P"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:AUTH-P">AUTH-P</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NICK</code><code>)</code>  </header> <pre class="docstring">Return T if the requested nick is on the server's authenticated users list.</pre> </article> </li><li> <a name="COLLEEN:BREAK-STRING"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:BREAK-STRING">BREAK-STRING</a></code></h4> <code class="qualifiers"></code> <code class="arguments">STRING &amp;KEY (LIMIT *IRC-MESSAGE-LIMIT*) (MAX-BACKSTEP 30) (BREAK-CHAR 
)
 (LATCH-CHAR  )</code><code>)</code>  </header> <pre class="docstring">Break the string into parts of a maximal length of LIMIT, intermitting BREAK-CHAR.
If possible, use LATCH-CHAR to find a more apropriate breaking point within the limit of MAX-BACKSTEP.</pre> </article> </li><li> <a name="COLLEEN:COLOR-ENTITIES"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:COLOR-ENTITIES">COLOR-ENTITIES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">STRING</code><code>)</code>  </header> <pre class="docstring">Returns two values:
  1. the formatting stripped string
  2. a list of mIRC formatting entities found in the string.
Each entity is a list with the following format: (TYPE START END)</pre> </article> </li><li> <a name="COLLEEN:COMMAND-P"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:COMMAND-P">COMMAND-P</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MESSAGE</code><code>)</code>  </header> <pre class="docstring">If the message starts with a configured prefix and thus matches as a command,
the matched prefix is returned and otherwise NIL.</pre> </article> </li><li> <a name="COLLEEN:ENSURE-SERVER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:ENSURE-SERVER">ENSURE-SERVER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">THING</code><code>)</code>  </header> <pre class="docstring">Ensures that THING is a server instance.

Thing can be a SERVER, STRING, or SYMBOL.</pre> </article> </li><li> <a name="COLLEEN:FORMAT-MESSAGE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:FORMAT-MESSAGE">FORMAT-MESSAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">EVENT MESSAGE &amp;REST OTHER-REPLACES</code><code>)</code>  </header> <pre class="docstring">Format the given message, replacing $NICK$, $CHANNEL$, $SERVER$ and $MYSELF$ with the according values.</pre> </article> </li><li> <a name="COLLEEN:FSTD-MESSAGE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:FSTD-MESSAGE">FSTD-MESSAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">EVENT MSGSYMBOL &amp;REST OTHERWISE-FORMAT</code><code>)</code>  </header> <pre class="docstring">Shorthand for (format-message (standard-message ..)).</pre> </article> </li><li> <a name="COLLEEN:GENERATE-HANDLER-PRIORITY-CACHE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:GENERATE-HANDLER-PRIORITY-CACHE">GENERATE-HANDLER-PRIORITY-CACHE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (HANDLER-MAP *EVT-MAP*)</code><code>)</code>  </header> <pre class="docstring">Regenerates the event handler priority map.
Necessary to ensure proper event handling order.</pre> </article> </li><li> <a name="COLLEEN:GET-CURRENT-MODULE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:GET-CURRENT-MODULE">GET-CURRENT-MODULE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (PACKAGE *PACKAGE*)</code><code>)</code>  </header> <pre class="docstring">Returns the module of the current package context.</pre> </article> </li><li> <a name="COLLEEN:GET-CURRENT-MODULE-NAME"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:GET-CURRENT-MODULE-NAME">GET-CURRENT-MODULE-NAME</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (PACKAGE *PACKAGE*)</code><code>)</code>  </header> <pre class="docstring">Returns the name of the module in the current package context.</pre> </article> </li><li> <a name="COLLEEN:GET-MODULE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:GET-MODULE">GET-MODULE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">DESIGNATOR</code><code>)</code>  </header> <pre class="docstring">Returns the current class instance of the module.</pre> </article> </li><li> <a name="COLLEEN:GET-SERVER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:GET-SERVER">GET-SERVER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">KEYWORD</code><code>)</code>  </header> <pre class="docstring">Retrieve a server by its keyword name, if it is connected.</pre> </article> </li><li> <a name="COLLEEN:LOAD-CONFIG"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:LOAD-CONFIG">LOAD-CONFIG</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (CONFIG-FILE *CONFIG-FILE*)</code><code>)</code>  </header> <pre class="docstring">(Re)load the static configuration.</pre> </article> </li><li> <a name="COLLEEN:LOAD-MODULE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:LOAD-MODULE">LOAD-MODULE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NAME</code><code>)</code>  </header> <pre class="docstring">Tries to find and load a module of NAME.</pre> </article> </li><li> <a name="COLLEEN:MAKE-EVENT"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:MAKE-EVENT">MAKE-EVENT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">EVENT-NAME SERVER PREFIX ARGUMENTS</code><code>)</code>  </header> <pre class="docstring">Makes an event instance from the given parameters.</pre> </article> </li><li> <a name="COLLEEN:MIRC-COLOR-&gt;NAME"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:MIRC-COLOR-&gt;NAME">MIRC-COLOR-&gt;NAME</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NUM</code><code>)</code>  </header> <pre class="docstring">Attempts to translate an mIRC color sequence to a color name.
Returns the colour name as a keyword or :?</pre> </article> </li><li> <a name="COLLEEN:MODULE-CONFIG-PATH"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:MODULE-CONFIG-PATH">MODULE-CONFIG-PATH</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:MODULE-LAUNCHER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:MODULE-LAUNCHER">MODULE-LAUNCHER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE-NAME THREAD FUNCTION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:PRINT-MODULE-THREAD-STATS"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PRINT-MODULE-THREAD-STATS">PRINT-MODULE-THREAD-STATS</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Prints all modules that have recorded threads and whether the threads are active (.) or dead (x).</pre> </article> </li><li> <a name="COLLEEN:RELAY-COMMAND"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:RELAY-COMMAND">RELAY-COMMAND</a></code></h4> <code class="qualifiers"></code> <code class="arguments">EVENT NEW-COMMAND</code><code>)</code>  </header> <pre class="docstring">Relays a command-event to a new command.

This generates a new COMMAND-EVENT with the given NEW-COMMAND as message.
The nick, username, etc. will be carried over from the event.</pre> </article> </li><li> <a name="COLLEEN:REMOVE-COMMAND-HANDLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:REMOVE-COMMAND-HANDLER">REMOVE-COMMAND-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER</code><code>)</code>  </header> <pre class="docstring">Remove the COMMAND-HANDLER associated with the given IDENTIFIER.</pre> </article> </li><li> <a name="COLLEEN:REMOVE-EVENT-HANDLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:REMOVE-EVENT-HANDLER">REMOVE-EVENT-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER</code><code>)</code>  </header> <pre class="docstring">Remove the EVENT-HANDLER associated with the given IDENTIFIER.</pre> </article> </li><li> <a name="COLLEEN:REMOVE-FROM-AUTH"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:REMOVE-FROM-AUTH">REMOVE-FROM-AUTH</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NICK &amp;OPTIONAL REASON</code><code>)</code>  </header> <pre class="docstring">Remove the user from the authenticated list. The optional reason string is only for logging.</pre> </article> </li><li> <a name="COLLEEN:REMOVE-MODULE-THREAD"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:REMOVE-MODULE-THREAD">REMOVE-MODULE-THREAD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE UUID &amp;KEY KEEP-ALIVE</code><code>)</code>  </header> <pre class="docstring">Removes the thread identified by UUID from the MODULE.
If KEEP-ALIVE is non-NIL and the thread is alive, it is only removed.
Otherwise if it is still alive, the thread is stopped and removed.</pre> </article> </li><li> <a name="COLLEEN:REMOVE-TIME-HANDLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:REMOVE-TIME-HANDLER">REMOVE-TIME-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER</code><code>)</code>  </header> <pre class="docstring">Removes (and stops) the TIME-HANDLER of the given IDENTIFIER.</pre> </article> </li><li> <a name="COLLEEN:RESCHEDULE-TIMER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:RESCHEDULE-TIMER">RESCHEDULE-TIMER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">TIMER TYPE DELAY &amp;KEY ARGUMENTS (REPLACE :ALL)</code><code>)</code>  </header> <pre class="docstring">Reschedule the given TIMER by replacing an existing scheduling or all.

TIMER     --- A symbol naming the time-handler.
TYPE      --- Can be one of :DATE :TIME :ONCE :WHEN, in which case
              the scheduling only occurs once, or it can be one of
              :INTERVAL :REPEATING :LOOP :EVERY, in which case it is
              run repeatedly.
DELAY     --- A time designator as parsed by PARSE-DELAY.
ARGUMENTS --- The arguments list to call the timer with.
REPLACE   --- Can be :ALL, :FIRST, :LAST or an integer of the position
              to replace.</pre> </article> </li><li> <a name="COLLEEN:SAVE-CONFIG"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SAVE-CONFIG">SAVE-CONFIG</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;OPTIONAL (CONFIG-FILE *CONFIG-FILE*)</code><code>)</code>  </header> <pre class="docstring">Save the static configuration to file.</pre> </article> </li><li> <a name="COLLEEN:SCHEDULE-TIMER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SCHEDULE-TIMER">SCHEDULE-TIMER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">TIMER TYPE DELAY &amp;KEY ARGUMENTS (IF-EXISTS NIL IEP)</code><code>)</code>  </header> <pre class="docstring">Schedule a new scheduling for the TIMER.

TIMER     --- A symbol naming the time-handler.
TYPE      --- Can be one of :DATE :TIME :ONCE :WHEN, in which case
              the scheduling only occurs once, or it can be one of
              :INTERVAL :REPEATING :LOOP :EVERY, in which case it is
              run repeatedly.
DELAY     --- A time designator as parsed by PARSE-DELAY.
ARGUMENTS --- The arguments list to call the timer with.
IF-EXISTS --- What to do if a scheduling already exists for the timer.
              :ADD adds a new scheduling, :ERROR signals a condition,
              NIL does nothing. This defaults to :ERROR on :SINGLE
              timers and to :ADD on :MULTIPLE timers.</pre> </article> </li><li> <a name="COLLEEN:SERVER-CONFIG"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SERVER-CONFIG">SERVER-CONFIG</a></code></h4> <code class="qualifiers"></code> <code class="arguments">SERVER VAR</code><code>)</code>  </header> <pre class="docstring">Shorthand accessor for server configuration values, defaulting to the DEFAULT server if not available.</pre> </article> </li><li> <a name="COLLEEN:SET-COMMAND-FUNCTION"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SET-COMMAND-FUNCTION">SET-COMMAND-FUNCTION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER CMD-PATTERN HANDLER-FUNCTION &amp;KEY (ARGUMENTS NIL A-P)
 (PRIORITY (LENGTH CMD-PATTERN)) DOCSTRING (CLASS 'COMMAND-HANDLER)</code><code>)</code>  </header> <pre class="docstring">Set a new handler function for a command pattern.

IDENTIFIER       --- A symbol identifying your handler.
CMD-PATTERN      --- A REGEX pattern to match the message with. Usually you'll
                     want to do something like &quot;^my-command(.*)&quot;. Arguments are 
                     matched by the last regex group.
HANDLER-FUNCTION --- The function object to dispatch the command to. Has to
                     accept as many arguments as ARGUMENTS specifies as well
                     as a first argument that will be bound to the command event.
ARGUMENTS        --- A list of function arguments that the command should accept.
                     This lambda list can only contain &amp;OPTIONAL and &amp;REST.
                     If not provided, it will attempt to retrieve it through
                     FUNCTION-ARGUMENTS.
PRIORITY         --- Either a key from *PRIORITY-NAMES* or a real setting the
                     priority of the handler. Higher priorities are served first.
                     Defaults to the length of CMD-PATTERN, which should be sane.
DOCSTRING        --- An optional documentation string
CLASS            --- The class to make an instance of. Has to be subclass of 
                     COMMAND-HANDLER.</pre> </article> </li><li> <a name="COLLEEN:SET-HANDLER-FUNCTION"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SET-HANDLER-FUNCTION">SET-HANDLER-FUNCTION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER EVENT-CLASS FUNCTION &amp;KEY (PRIORITY :MAIN) DOCSTRING</code><code>)</code>  </header> <pre class="docstring">Set a new handler function for an event class.

IDENTIFIER  --- A symbol identifying your handler.
EVENT-CLASS --- The type of event class you want to handle.
FUNCTION    --- The function object to dispatch to on event handling. Has to
                accept exactly one argument, the event to handle.
PRIORITY    --- Either a key from *PRIORITY-NAMES* or a real setting the
                priority of the handler. Higher priorities are served first.
DOCSTRING   --- An optional documentation string.</pre> </article> </li><li> <a name="COLLEEN:SET-TIMER-FUNCTION"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SET-TIMER-FUNCTION">SET-TIMER-FUNCTION</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER HANDLER-FUNCTION &amp;KEY (TYPE :MULTIPLE) (ARGUMENTS NIL A-P)
 (LAUNCHER (FUNCTION SIMPLE-LAUNCHER)) DOCSTRING</code><code>)</code>  </header> <pre class="docstring">Set a new timer function.

IDENTIFIER       --- A symbol identifying the handler.
HANDLER-FUNCTION --- The function to run once a scheduling triggers. Has
                     to have the same arguments lambda-list as specified
                     by ARGUMENTS.
TYPE             --- Either :SINGLE or :MULTIPLE, which declares whether
                     the timer should be scheduled only once or can be
                     scheduled many times. Note that this does not enforce
                     the behaviour, only signals it to the user.
ARGUMENTS        --- A lambda-list for the arguments the HANDLER-FUNCTION
                     expects. If not provided, it will attempt to retrieve
                     it through FUNCTION-ARGUMENTS.
LAUNCHER         --- A function that expects two arguments, the scheduluing
                     thread it itself is called in and a function it should
                     call. Changing this is only useful if you need to
                     establish an environment around the timer call itself.
DOCSTRING        --- An optional documentation string.</pre> </article> </li><li> <a name="COLLEEN:SHUTDOWN"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SHUTDOWN">SHUTDOWN</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Shut down the bot: Disconnect servers, stop modules, save config.</pre> </article> </li><li> <a name="COLLEEN:SIMPLE-LAUNCHER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SIMPLE-LAUNCHER">SIMPLE-LAUNCHER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">THREAD FUNCTION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:SIMULATE-COMMAND"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SIMULATE-COMMAND">SIMULATE-COMMAND</a></code></h4> <code class="qualifiers"></code> <code class="arguments">COMMAND-STRING &amp;OPTIONAL (OUTPUT-STREAM *STANDARD-OUTPUT*)</code><code>)</code>  </header> <pre class="docstring">Simulates passing a command.

This generates a GENERATED-COMMAND-EVENT with the given COMMAND-STRING and OUTPUT-STREAM.
The event will use the :NULL server, CL-USER!CL-USER@COLLEEN user ident and the INTERNAL channel.</pre> </article> </li><li> <a name="COLLEEN:STANDARD-MESSAGE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:STANDARD-MESSAGE">STANDARD-MESSAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MSGSYMBOL &amp;REST OTHERWISE-FORMAT</code><code>)</code>  </header> <pre class="docstring">Returns the default message designated by the symbol or if provided the otherwise-formatted string.</pre> </article> </li><li> <a name="COLLEEN:START-MODULE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:START-MODULE">START-MODULE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST MODULE-NAMES</code><code>)</code>  </header> <pre class="docstring">Start up one or more modules. Each module name should be a symbol or string.

The following restarts are available:
  SKIP  --- Skip starting the module.
  FORCE --- Force starting even though it's already active.
  RETRY --- Simply retry starting.</pre> </article> </li><li> <a name="COLLEEN:STARTUP"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:STARTUP">STARTUP</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Start up the bot: Load config, start modules, connect to servers.</pre> </article> </li><li> <a name="COLLEEN:STOP-MODULE"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:STOP-MODULE">STOP-MODULE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST MODULE-NAMES</code><code>)</code>  </header> <pre class="docstring">Stop one or more modules. Each module name should be a symbol or string.

The following restarts are available:
  SKIP  --- Skip stopping the module.
  FORCE --- Force stopping even though it isn't active.
  RETRY --- Simply retry stopping.</pre> </article> </li><li> <a name="COLLEEN:STOP-MODULE-THREAD"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:STOP-MODULE-THREAD">STOP-MODULE-THREAD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE UUID</code><code>)</code>  </header> <pre class="docstring">Stops the thread identified by UUID from the MODULE.
The thread will most likely remove itself once it stops.
It is not guaranteed that the thread will stop immediately.</pre> </article> </li><li> <a name="COLLEEN:STOP-TIME-HANDLER"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:STOP-TIME-HANDLER">STOP-TIME-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">IDENTIFIER</code><code>)</code>  </header> <pre class="docstring">Stops all schedulings for the TIME-HANDLER of the given IDENTIFIER.</pre> </article> </li><li> <a name="COLLEEN:STRIP-COLORS"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:STRIP-COLORS">STRIP-COLORS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">STRING</code><code>)</code>  </header> <pre class="docstring">Strips mIRC color codes from the string.</pre> </article> </li><li> <a name="COLLEEN:SWEEP-ALL-MODULE-THREADS"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SWEEP-ALL-MODULE-THREADS">SWEEP-ALL-MODULE-THREADS</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <pre class="docstring">Performs SWEEP-MODULE-THREADS on all modules.</pre> </article> </li><li> <a name="COLLEEN:SWEEP-MODULE-THREADS"> </a> <article> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SWEEP-MODULE-THREADS">SWEEP-MODULE-THREADS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE</code><code>)</code>  </header> <pre class="docstring">Sweeps the module's threads table and removes all dead threads.
Returns two values: how many threads were removed and how many remain.</pre> </article> </li><li> <a name="COLLEEN:APROPOS-COMMAND-HANDLER"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:APROPOS-COMMAND-HANDLER">APROPOS-COMMAND-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLER</code><code>)</code>  </header> <pre class="docstring">Returns a string describing the given command handler if it exists.</pre> </article> </li><li> <a name="COLLEEN:APROPOS-EVENT-HANDLER"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:APROPOS-EVENT-HANDLER">APROPOS-EVENT-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLER</code><code>)</code>  </header> <pre class="docstring">Returns a string describing the given event handler if it exists.</pre> </article> </li><li> <a name="COLLEEN:APROPOS-TIME-HANDLER"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:APROPOS-TIME-HANDLER">APROPOS-TIME-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLER</code><code>)</code>  </header> <pre class="docstring">Returns a string describing the given time-handler if it exists.</pre> </article> </li><li> <a name="COLLEEN:ARGSLIST"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:ARGSLIST">ARGSLIST</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:COMMAND"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:COMMAND">COMMAND</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:CONNECT"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:CONNECT">CONNECT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">SERVER-OR-NAME &amp;KEY HOST PORT NICK USER PASS REAL START-THREAD
 &amp;ALLOW-OTHER-KEYS</code><code>)</code>  </header> <pre class="docstring">Connect to a server instance.</pre> </article> </li><li> <a name="COLLEEN:DISCONNECT"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DISCONNECT">DISCONNECT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">SERVER-OR-NAME &amp;KEY QUIT-MESSAGE KILL-RECONNECT QUIT &amp;ALLOW-OTHER-KEYS</code><code>)</code>  </header> <pre class="docstring">Disconnect a server instance and terminate their read-threads.</pre> </article> </li><li> <a name="COLLEEN:DISPATCH"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DISPATCH">DISPATCH</a></code></h4> <code class="qualifiers"></code> <code class="arguments">EVENT</code><code>)</code>  </header> <pre class="docstring">Dispatch an event instance through the event system.

Unless specifically rebound, for standard events the following restarts are available:
  STOP-EVENT    --- Stops dispatching completely and returns.
  SKIP-HANDLER  --- Skips the current handler.
  RETRY-HANDLER --- Attempts invoking the handler again.</pre> </article> </li><li> <a name="COLLEEN:DISPATCH-COMMAND"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DISPATCH-COMMAND">DISPATCH-COMMAND</a></code></h4> <code class="qualifiers"></code> <code class="arguments">EVENT</code><code>)</code>  </header> <pre class="docstring">Dispatches an event to command handlers.

Unless specifically rebound, for command events the following restarts are available:
  STOP-COMMAND      --- Stops dispatching completely and returns.
  SKIP-HANDLER      --- Skips the current handler.
  REMATCH-HANDLER   --- Attempts to rematch the command with the handler's pattern.
  RECHECK-ARGUMENTS --- Rechecks the command arguments with the handler's arguments list.
  RETRY-HANDLER     --- Attempts invoking the handler again.</pre> </article> </li><li> <a name="COLLEEN:EVENT"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:EVENT">EVENT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:EXPECTED"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:EXPECTED">EXPECTED</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:FAILED-SERVER"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:FAILED-SERVER">FAILED-SERVER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:GROUP"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:GROUP">GROUP</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:HOSTMASK"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:HOSTMASK">HOSTMASK</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:INITIAL-ERROR"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:INITIAL-ERROR">INITIAL-ERROR</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CONDITION</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:LOAD-STORAGE"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:LOAD-STORAGE">LOAD-STORAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE</code><code>)</code>  </header> <pre class="docstring"></pre> </article> </li><li> <a name="COLLEEN:PARSE-DELAY"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PARSE-DELAY">PARSE-DELAY</a></code></h4> <code class="qualifiers"></code> <code class="arguments">DELAY</code><code>)</code>  </header> <pre class="docstring">Parses a delay to be used in timers.

If the delay is an INTEGER, it is returned as-is.
If the delay is a LIST, the following keywords may be used:

  :SEC :MIN :HOUR :DAY :MONTH :YEAR
    Creates an absolute (universal-time) timestamp for the
    specified date. If a parameter is not specified, the
    current time component (current day, hour, etc) is used.

  :UNIX :UNIVERSAL
    Creates an absolute (universal-time) timestamp for the
    specified date.

  :SECS :MINS :HOURS :DAYS :MONTHS :YEARS
    Creates a relative (in seconds) timestamp for the
    specified timespan.

  :IN
    Creates an absolute (universal-time) timestamp using
    the specified relative sub-delay, which is parsed by
    PARSE-DELAY.

  :FROM :EVERY :UNTIL
    Creates a timestamp with an initial delay specified by
    :FROM and a following delay of :EVERY. Both parameters
    are again parsed with PARSE-DELAY. If :UNTIL is passed,
    the timestamp will only repeat until the absolute 
    timestamp :UNTIL is reached.</pre> </article> </li><li> <a name="COLLEEN:PREFIX"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:PREFIX">PREFIX</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:RECONNECT"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:RECONNECT">RECONNECT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">SERVER-OR-NAME &amp;KEY TRY-AGAIN-INDEFINITELY</code><code>)</code>  </header> <pre class="docstring">Attempt to reconnect a server instance.</pre> </article> </li><li> <a name="COLLEEN:REPLY-&gt;KEYWORD"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:REPLY-&gt;KEYWORD">REPLY-&gt;KEYWORD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">CODE</code><code>)</code>  </header> <pre class="docstring">Take a reply code and turn it into a corresponding keyword if possible.</pre> </article> </li><li> <a name="COLLEEN:RESPOND"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:RESPOND">RESPOND</a></code></h4> <code class="qualifiers"></code> <code class="arguments">EVENT MESSAGE &amp;REST FORMAT-ARGS</code><code>)</code>  </header> <pre class="docstring">Respond to an event origin with the given message.</pre> </article> </li><li> <a name="COLLEEN:SAVE-STORAGE"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SAVE-STORAGE">SAVE-STORAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE</code><code>)</code>  </header> <pre class="docstring"></pre> </article> </li><li> <a name="COLLEEN:SERVER"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:SERVER">SERVER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">OBJECT</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:START"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:START">START</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE</code><code>)</code>  </header> <pre class="docstring">Start the module and activate it for use.</pre> </article> </li><li> <a name="COLLEEN:STOP"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:STOP">STOP</a></code></h4> <code class="qualifiers"></code> <code class="arguments">MODULE</code><code>)</code>  </header> <pre class="docstring">Stop the module and attempt to clean everything up.</pre> </article> </li><li> <a name="COLLEEN:TO-MODULE-NAME"> </a> <article> <header class="generic"> <span class="type">generic</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:TO-MODULE-NAME">TO-MODULE-NAME</a></code></h4> <code class="qualifiers"></code> <code class="arguments">NAME-OBJECT</code><code>)</code>  </header> <pre class="docstring">Attempts to transform the given object into the keyword name for a module.</pre> </article> </li><li> <a name="COLLEEN:DEFINE-COMMAND"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DEFINE-COMMAND">DEFINE-COMMAND</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Defines a new command with the given NAME.

NAME          ::= IDENTIFIER | (GROUP IDENTIFIER)
IDENTIFIER    --- A symbol identifying your command.
GROUP         --- The command group to bind the command to.
ARGS          --- A list of arguments the command expects. This is a
                  reduced lambda-list that can only accept required,
                  optional and rest args. See SET-COMMAND-FUNCTION.
AUTHORIZATION --- If T, the command issuing NICK is checked with AUTH-P.
                  If the test fails, a NOT-AUTHORIZED error is raised.
DOCUMENTATION --- An optional docstring.
EVENTVAR      --- Symbol to bind the event variable to.
MODULE-NAME   --- An optional name to activate module convenience bindings.
                  Defaults to GET-CURRENT-MODULE-NAME when unset.
MODULEVAR     --- The symbol to bind the module instance to, if at all.
IDENTIFIER    --- See SET-COMMAND-FUNCTION. Defaults to a symbol made up
                  of MODULE-NAME and TYPE.
PATTERN       --- The pattern to match the command with. Defaults to
                  ^NAME(.*)
PRIORITY      --- See SET-COMMAND-FUNCTION.
THREADED      --- If a MODULE is found and bound to this handler, setting
                  this to T will execute the body in a module thread with
                  the module lock held. 
                  See WITH-MODULE-THREAD, WITH-MODULE-LOCK.
BODY          ::= FORM*</pre> </article> </li><li> <a name="COLLEEN:DEFINE-EVENT"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DEFINE-EVENT">DEFINE-EVENT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Define a new event class for a given IRC event code.
NAME is the class-name to use for the event, preferably suffixed by -event.
EVENT-OR-CODE is the event symbol as in REPLY-CODES or the IRC event name or number.
SUPERCLASSES is a list of superclasses, defaulting to (EVENT)
STRUCTURE is a lambda-list of the arguments that are to be parsed for this event. See ARGUMENTS-BIND.
CLASS-OPTIONS are the other options that can be passed to DEFCLASS, such as :DOCUMENTATION and so on.</pre> </article> </li><li> <a name="COLLEEN:DEFINE-GROUP"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DEFINE-GROUP">DEFINE-GROUP</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Defines a new group with the given NAME.

NAME          --- A symbol dictating the group's identifier.
DOCUMENTATION --- Optional docstring.
PATTERN       --- The pattern to match the command with. Defaults
                  to ^NAME(.*)
SUBCOMMANDS   --- A list of subcommand identifiers that this group 
                  is supposedly providing.

See SET-COMMAND-FUNCTION</pre> </article> </li><li> <a name="COLLEEN:DEFINE-HANDLER"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DEFINE-HANDLER">DEFINE-HANDLER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Define an event handler for a module.

EVENT-TYPE    ::= TYPE | (TYPE NAME)
TYPE          --- The type of event class you want to handle.
NAME          --- A symbol for the variable name to bind the event to.
                  By default the same as TYPE.
MODULE-NAME   --- An optional name to activate module convenience bindings.
                  Defaults to GET-CURRENT-MODULE-NAME when unset.
MODULEVAR     --- The symbol to bind the module instance to, if at all.
IDENTIFIER    --- See SET-HANDLER-FUNCTION. Defaults to a symbol made up
                  of MODULE-NAME and TYPE.
PRIORITY      --- See SET-HANDLER-FUNCTION.
THREADED      --- If a MODULE is found and bound to this handler, setting
                  this to T will execute the body in a module thread with
                  the module lock held. 
                  See WITH-MODULE-THREAD, WITH-MODULE-LOCK.
DOCUMENTATION --- A docstring describing the handler.
BODY          ::= FORM*</pre> </article> </li><li> <a name="COLLEEN:DEFINE-MODULE"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DEFINE-MODULE">DEFINE-MODULE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Define a new module class. See DEFCLASS.
Note that all module slots are always allocated on the class.</pre> </article> </li><li> <a name="COLLEEN:DEFINE-MODULE-SYSTEM"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DEFINE-MODULE-SYSTEM">DEFINE-MODULE-SYSTEM</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Shorthand wrapper around ASDF:DEFSYSTEM to quickly define Colleen contrib modules.</pre> </article> </li><li> <a name="COLLEEN:DEFINE-TIMER"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DEFINE-TIMER">DEFINE-TIMER</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Defines a new timer with the given NAME.

NAME          --- A symbol identifying your timer.
ARGS          --- A list of arguments the timer expects. This is a
                  reduced lambda-list that can only accept required,
                  optional and rest args. See SET-TIMER-FUNCTION.
TYPE          --- Either :SINGLE or :MULTIPLE. See SET-TIMER-FUNCTION.
DOCUMENTATION --- An optional docstring.
EVENTVAR      --- Symbol to bind the event variable to.
MODULE-NAME   --- An optional name to activate module convenience bindings.
                  Defaults to GET-CURRENT-MODULE-NAME when unset.
MODULEVAR     --- The symbol to bind the module instance to, if at all.
BODY          ::= form*</pre> </article> </li><li> <a name="COLLEEN:DO-MATCHING-COMMAND-HANDLERS"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:DO-MATCHING-COMMAND-HANDLERS">DO-MATCHING-COMMAND-HANDLERS</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Applies BODY for each matching COMMAND-HANDLER, binding it to HANDLERVAR.</pre> </article> </li><li> <a name="COLLEEN:WITH-MODULE"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:WITH-MODULE">WITH-MODULE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Executes the forms in a context where VAR is bound to the module instance named by NAME.
This also binds *CURRENT-MODULE*.</pre> </article> </li><li> <a name="COLLEEN:WITH-MODULE-LOCK"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:WITH-MODULE-LOCK">WITH-MODULE-LOCK</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Creates a context with the module's lock held.
The FORMS are only executed once the lock has been acquired.
This is an implicit PROGN.

MODULE  --- The module to use the lock of.
LOCKVAR --- A symbol the lock is bound to.
FORMS   ::= form*</pre> </article> </li><li> <a name="COLLEEN:WITH-MODULE-STORAGE"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:WITH-MODULE-STORAGE">WITH-MODULE-STORAGE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring"/> </article> </li><li> <a name="COLLEEN:WITH-MODULE-THREAD"> </a> <article> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#COLLEEN:WITH-MODULE-THREAD">WITH-MODULE-THREAD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">&amp;REST ARGS</code><code>)</code>  </header> <pre class="docstring">Executes the THREAD-BODY in a separate thread bound to the MODULE.
The return value of this is the new thread's UUID string.

The thread contains implicit condition handling constructs:
When an error is caught at the lowest level and *DEBUGGER* is non-NIL,
then the error is passed to INVOKE-DEBUGGER. If the condition is not
handled or when the thread body finishes executing, the thread is ended
and it is removed from the module's threads table.</pre> </article> </li></ul> </li></ul> </article>  </main> </body> </html> 